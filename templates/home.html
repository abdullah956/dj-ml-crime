{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Crime Detection</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet" />

    <!-- Vendor CSS Files -->
    <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" />
    <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet" />
    <link href="{% static 'vendor/aos/aos.css' %}" rel="stylesheet" />
    <link href="{% static 'vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet" />
    <link href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet" />

    <!-- Main CSS File -->
    <link href="{% static 'css/main.css' %}" rel="stylesheet" />
    <!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>


    <style>
    #map-ryk, #map-sdk, #map-bwp {
      height: 400px;
      margin-bottom: 15px;
    }
    select {
      margin: 5px;
      padding: 3px;
    }
  </style>



    <!--               =======================================================
  * Template Name: BizLand
  * Template URL: https://bootstrapmade.com/bizland-bootstrap-business-template/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ========================================================               -->
  </head>

  <body class="index-page">
    <header id="header" class="header sticky-top">
      <div class="branding d-flex align-items-cente">
        <div class="container position-relative d-flex align-items-center justify-content-between">
          <a href="{% url 'home'%}" class="logo d-flex align-items-center">
            <!-- Uncomment the line below if you also wish to use an image logo -->
            <!-- <img src="assets/img/logo.png" alt=""> -->
            <h1 class="sitename">Crime Alert</h1>
          </a>

          <nav id="navmenu" class="navmenu">
            <ul>
              <li>
                <a href="{% url 'search_area' %}">Search City</a>
              </li>
              <li>
                <a href="{% url 'predict_year' %}">Predict Year</a>
              </li>
              <li>
                <a href="{% url 'chat' %}">Chat</a>
              </li>
              <li>
                <a href="{% url 'area_crime_heatmap' %}">City Crime Heat Map</a>
              </li>
              <li>
                <a href="{% url 'predicted_crime_by_area' %}">Predict City Crime</a>
              </li>
              <li>
                <a href="{% url 'crime_rate_by_area' %}">Crime 19-24</a>
              </li>
            </ul>

            <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
          </nav>
        </div>
      </div>
    </header>
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-success">{{ message }}</div>
      {% endfor %}
    {% endif %}


    <style>
      .hero {
        background: url("{% static 'img/bg.png' %}") top left no-repeat;
        background-size: cover;
      }
      </style>

    <main class="main">
      <!-- Hero Section -->
      <section id="hero" class="hero section light-background">
        <div class="container">
          <div class="row gy-4">
            <div class="col-lg-8 order-2 order-lg-1 d-flex flex-column justify-content-center" data-aos="zoom-out">
              <h1 style="color: black;"> <span>Welcome to Crime Alert</span></h1>
              <p>"CrimeLens – Spot. Analyze. Prevent."</p>
              <div class="d-flex">
                {% comment %} <a href="#about" class="btn-get-started">Get Started</a> {% endcomment %}
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- /Hero Section -->

      <!-- Featured Services Section -->
      <section id="featured-services" class="featured-services section">
        <div class="container">
          <div class="row gy-4">
            <div class="col-xl-3 col-md-6 d-flex" data-aos="fade-up" data-aos-delay="100">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-search icon"></i>
                </div>
                <h4><a href="{% url 'search_area' %}" class="stretched-link">Search Crime Data</a></h4>
                <p>Find crime statistics by searching specific areas for better insights and analysis.</p>
              </div>
            </div>
            <!-- End Service Item -->

            <div class="col-xl-3 col-md-6 d-flex" data-aos="fade-up" data-aos-delay="200">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-bar-chart-line icon"></i>
                </div>
                <h4><a href="{% url 'predict_year' %}" class="stretched-link">Crime Prediction</a></h4>
                <p>Predict crime trends for upcoming years using advanced machine learning models.</p>
              </div>
            </div>
            <!-- End Service Item -->

            <div class="col-xl-3 col-md-6 d-flex" data-aos="fade-up" data-aos-delay="300">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-map icon"></i>
                </div>
                <h4><a href="{% url 'area_crime_heatmap' %}" class="stretched-link">Crime Heatmap</a></h4>
                <p>Visualize crime density across different areas using interactive heatmaps.</p>
              </div>
            </div>
            <!-- End Service Item -->

            <div class="col-xl-3 col-md-6 d-flex" data-aos="fade-up" data-aos-delay="400">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-chat-dots icon"></i>
                </div>
                <h4><a href="{% url 'chat' %}" class="stretched-link">Crime Chatbot</a></h4>
                <p>Get instant crime-related insights and answers through an AI-powered chatbot.</p>
              </div>
            </div>
            <!-- End Service Item -->
          </div>
        </div>
      </section>

      <!-- /Featured Services Section -->

      <!-- About Section -->
      <section id="about" class="about section light-background">
        <!-- Section Title -->
        <div class="container section-title" data-aos="fade-up">
          <h2>Recents</h2>
          <p>
            <span>Total Crime Data by</span> <span class="description-title">City</span>
          </p>
        </div>
        <!-- End Section Title -->

        <div class="container d-flex justify-content-center">
          <div class="w-100">
            <table class="table table-striped text-center">
              <thead class="bg-primary text-white">
                <tr>
                  <th>City</th>
                  <th>2019</th>
                  <th>2020</th>
                  <th>2021</th>
                  <th>2022</th>
                  <th>2023</th>
                  <th>2024</th>
                </tr>
              </thead>
              <tbody>
                {% for area, data in area_crime_data.items %}
                  <tr>
                    <td>{{ area }}</td>
                    <td>{{ data.2019 }}</td>
                    <td>{{ data.2020 }}</td>
                    <td>{{ data.2021 }}</td>
                    <td>{{ data.2022 }}</td>
                    <td>{{ data.2023 }}</td>
                    <td>{{ data.2024 }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- /About Section -->



      <!-- Skills Section -->
      <section id="crime-trends" class="skills section">
        <div class="container" data-aos="fade-up" data-aos-delay="100">
          <div class="row skills-content skills-animation">
            {% for area, data in area_crime_data.items %}
              <div class="col-lg-6">
                <h5 class="text-center">{{ area }}</h5>
                {% for year, crime_rate in data.items %}
                  <div class="progress">
                    <span class="skill"><span>{{ year }}</span> <i class="val">{{ crime_rate }} crimes</i></span>
                    <div class="progress-bar-wrap">
                      <div class="progress-bar bg-primary" role="progressbar" aria-valuenow="{{ crime_rate }}" aria-valuemin="0" aria-valuemax="500" style="width: {{ crime_rate|add:0|floatformat:0|default:0|divisibleby:1|yesno:'300,0' }}%;"></div>
                    </div>
                  </div>
                {% endfor %}
              </div>
            {% endfor %}
          </div>
        </div>
      </section>


    <div class="container">
      <h2>Crime Maps (2019-2024)</h2>

    <div>
      <h4>Rahim Yar Khan</h4>
      <select id="year-ryk" onchange="updateMap('Rahim Yar Khan')">
        <option value="all">All Years</option>
        <option>2019</option><option>2020</option><option>2021</option>
        <option>2022</option><option>2023</option><option>2024</option>
      </select>
      <select id="crime-ryk" onchange="updateMap('Rahim Yar Khan')">
        <option value="all">All Crimes</option>
      </select>
      <div id="map-ryk"></div>
    </div>

    <div>
      <h4>Sadiqabad</h4>
      <select id="year-sdk" onchange="updateMap('Sadiqabad')">
        <option value="all">All Years</option>
        <option>2019</option><option>2020</option><option>2021</option>
        <option>2022</option><option>2023</option><option>2024</option>
      </select>
      <select id="crime-sdk" onchange="updateMap('Sadiqabad')">
        <option value="all">All Crimes</option>
      </select>
      <div id="map-sdk"></div>
    </div>

    <div>
      <h4>Bahawalpur</h4>
      <select id="year-bwp" onchange="updateMap('Bahawalpur')">
        <option value="all">All Years</option>
        <option>2019</option><option>2020</option><option>2021</option>
        <option>2022</option><option>2023</option><option>2024</option>
      </select>
      <select id="crime-bwp" onchange="updateMap('Bahawalpur')">
        <option value="all">All Crimes</option>
      </select>
      <div id="map-bwp"></div>
    </div>
    </div>





      


      <!-- /Skills Section -->

      <!-- Stats Section -->
      <section id="stats" class="stats section">
        <div class="container" data-aos="fade-up" data-aos-delay="100">
          <div class="row gy-4">
            <div class="col-lg-3 col-md-6 d-flex flex-column align-items-center">
              <i class="bi bi-exclamation-triangle"></i>
              <div class="stats-item">
                <span class="purecounter" data-purecounter-start="0" data-purecounter-end="{{ max_crimes }}" data-purecounter-duration="1"></span>
                <p>Highest Crime Count</p>
              </div>
            </div>

            <div class="col-lg-3 col-md-6 d-flex flex-column align-items-center">
              <i class="bi bi-building"></i>
              <div class="stats-item">
                <span>{{ city_with_max_crimes }}</span>
                <p>City with Most Crimes</p>
              </div>
            </div>

            <div class="col-lg-3 col-md-6 d-flex flex-column align-items-center">
              <i class="bi bi-calendar"></i>
              <div class="stats-item">
                <span>{{ year_with_max_crimes }}</span>
                <p>Year with Most Crimes</p>
              </div>
            </div>

            <div class="col-lg-3 col-md-6 d-flex flex-column align-items-center">
              <i class="bi bi-bar-chart"></i>
              <div class="stats-item">
                <span class="purecounter" data-purecounter-start="0" data-purecounter-end="{{ yearly_totals.2024 }}" data-purecounter-duration="1"></span>
                <p>Crimes in 2024</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- /Stats Section -->

      <!-- Clients Section -->
      <section id="clients" class="clients section light-background">
        <div class="container">
          <div class="swiper init-swiper">
            <script type="application/json" class="swiper-config">
            {
              "loop": true,
              "speed": 600,
              "autoplay": {
                "delay": 5000
              },
              "slidesPerView": "auto",
              "pagination": {
                "el": ".swiper-pagination",
                "type": "bullets",
                "clickable": true
              },
              "breakpoints": {
                "320": {
                  "slidesPerView": 2,
                  "spaceBetween": 40
                },
                "480": {
                  "slidesPerView": 3,
                  "spaceBetween": 60
                },
                "640": {
                  "slidesPerView": 4,
                  "spaceBetween": 80
                },
                "992": {
                  "slidesPerView": 6,
                  "spaceBetween": 120
                }
              }
            }
          </script>
            <div class="swiper-wrapper align-items-center">
              <div class="swiper-slide">
                <img src="assets/img/clients/client-1.png" class="img-fluid" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="assets/img/clients/client-2.png" class="img-fluid" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="assets/img/clients/client-3.png" class="img-fluid" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="assets/img/clients/client-4.png" class="img-fluid" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="assets/img/clients/client-5.png" class="img-fluid" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="assets/img/clients/client-6.png" class="img-fluid" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="assets/img/clients/client-7.png" class="img-fluid" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="assets/img/clients/client-8.png" class="img-fluid" alt="" />
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- /Clients Section -->

      <!-- Services Section -->
      <section id="services" class="services section">
        <div class="container section-title" data-aos="fade-up">
          <h2>Services</h2>
          <p>
            <span>Check Our</span> <span class="description-title">Services</span>
          </p>
        </div>

        <div class="container">
          <div class="row gy-4">
            <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="100">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-bar-chart-line"></i>
                </div>
                <a href="#" class="stretched-link"><h3>Crime Data Visualization</h3></a>
                <p>Interactive charts and graphs to analyze crime trends across different cities and years.</p>
              </div>
            </div>

            <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="200">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-search"></i>
                </div>
                <a href="#" class="stretched-link"><h3>Crime Prediction</h3></a>
                <p>AI-driven crime prediction based on historical data to identify potential high-risk areas.</p>
              </div>
            </div>

            {% comment %} <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-geo-alt"></i>
                </div>
                <a href="#" class="stretched-link"><h3>Crime Mapping</h3></a>
                <p>Geospatial mapping of crime incidents to provide location-based insights.</p>
              </div>
            </div> {% endcomment %}

            {% comment %} <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="400">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-bell"></i>
                </div>
                <a href="#" class="stretched-link"><h3>Real-Time Crime Alerts</h3></a>
                <p>Get notified about crime trends and potential threats in your area.</p>
              </div>
            </div> {% endcomment %}

            <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="500">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-clipboard-data"></i>
                </div>
                <a href="#" class="stretched-link"><h3>Crime Reports Analysis</h3></a>
                <p>Generate detailed reports based on crime statistics for better decision-making.</p>
              </div>
            </div>

            <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="600">
              <div class="service-item position-relative">
                <div class="icon">
                  <i class="bi bi-shield-lock"></i>
                </div>
                <a href="#" class="stretched-link"><h3>Security Recommendations</h3></a>
                <p>AI-powered security suggestions to reduce crime risks in different areas.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- /Services Section -->

    

      <!-- Team Section -->
      <section id="team" class="team section light-background">
        <!-- Section Title -->
        <div class="container section-title" data-aos="fade-up">
          <h2>Team</h2>
          <p>
            <span>Our Hardworking</span> <span class="description-title">Team</span>
          </p>
        </div>
        <!-- End Section Title -->

        <div class="container">
          <div class="row gy-4">
            <div class="col-lg-6 col-md-6 d-flex align-items-stretch" data-aos="fade-up" data-aos-delay="100">
              <div class="team-member">
                <div class="member-img">
                  <img src="{% static 'img/sher.png' %}" class="img-fluid" alt="Hassan" />
                  <div class="social">
                    <a href="#"><i class="bi bi-twitter-x"></i></a>
                    <a href="#"><i class="bi bi-facebook"></i></a>
                    <a href="#"><i class="bi bi-instagram"></i></a>
                    <a href="#"><i class="bi bi-linkedin"></i></a>
                  </div>
                </div>
                <div class="member-info">
                  <h4>Sher Gull</h4>
                  <span>Reg No: COSC 211101030</span>
                </div>
              </div>
            </div>

            <div class="col-lg-6 col-md-6 d-flex align-items-stretch" data-aos="fade-up" data-aos-delay="200">
              <div class="team-member">
                <div class="member-img">
                  <img src="{% static 'img/hassan.png' %}" class="img-fluid" alt="Sher Gul" />
                  <div class="social">
                    <a href="#"><i class="bi bi-twitter-x"></i></a>
                    <a href="#"><i class="bi bi-facebook"></i></a>
                    <a href="#"><i class="bi bi-instagram"></i></a>
                    <a href="#"><i class="bi bi-linkedin"></i></a>
                  </div>
                </div>
                <div class="member-info">
                  <h4>Hassan</h4>
                  <span>Reg No: COSC 211101027</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- /Team Section -->



      <!-- Faq Section -->
      <section id="faq" class="faq section light-background">
        <div class="container section-title" data-aos="fade-up">
          <h2>F.A.Q</h2>
          <p>
            <span>Frequently Asked</span> <span class="description-title">Questions</span>
          </p>
        </div>

        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-10" data-aos="fade-up" data-aos-delay="100">
              <div class="faq-container">
                <div class="faq-item faq-active">
                  <h3>How does CrimeLens help in identifying offenses?</h3>
                  <div class="faq-content">
                    <p>CrimeLens uses AI to analyze user-reported incidents and match them with relevant legal offense codes, helping law enforcement and the public quickly identify crimes.</p>
                  </div>
                  <i class="faq-toggle bi bi-chevron-right"></i>
                </div>

                <div class="faq-item">
                  <h3>Can CrimeLens be used by law enforcement agencies?</h3>
                  <div class="faq-content">
                    <p>Yes, CrimeLens is designed for both public use and law enforcement agencies to assist in crime categorization, reporting, and legal reference.</p>
                  </div>
                  <i class="faq-toggle bi bi-chevron-right"></i>
                </div>

                <div class="faq-item">
                  <h3>What data sources does CrimeLens use?</h3>
                  <div class="faq-content">
                    <p>CrimeLens utilizes official legal databases, law enforcement records, and AI-driven analysis to provide accurate crime classifications.</p>
                  </div>
                  <i class="faq-toggle bi bi-chevron-right"></i>
                </div>

                <div class="faq-item">
                  <h3>Is my data secure when using CrimeLens?</h3>
                  <div class="faq-content">
                    <p>Yes, we prioritize user privacy and security. CrimeLens does not store personal data and follows strict security protocols to protect information.</p>
                  </div>
                  <i class="faq-toggle bi bi-chevron-right"></i>
                </div>

                <div class="faq-item">
                  <h3>Can CrimeLens be used to report a crime?</h3>
                  <div class="faq-content">
                    <p>No, CrimeLens is an analytical tool for understanding crime classifications. To report a crime, please contact your local law enforcement agency.</p>
                  </div>
                  <i class="faq-toggle bi bi-chevron-right"></i>
                </div>

                <div class="faq-item">
                  <h3>Does CrimeLens cover international laws?</h3>
                  <div class="faq-content">
                    <p>Currently, CrimeLens focuses on local and national legal frameworks. Future updates may include international legal references.</p>
                  </div>
                  <i class="faq-toggle bi bi-chevron-right"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- /Faq Section -->

      <!-- Contact Section -->
      <section id="contact" class="contact section">
       

       
      </section>
      <!-- /Contact Section -->
    </main>

    <footer id="footer" class="footer">
     

      <hr />
      <div class="container footer-top">
        <div class="row gy-4">
          <div class="col-lg-6 footer-about">
            <a href="{% url 'home'%}" class="d-flex align-items-center"><span class="sitename">Crime Alert</span></a>
            <div class="footer-contact pt-3">
              <p>
                <strong>Email:</strong> <span>support@crimelens.com</span>
              </p>
            </div>
          </div>

          <div class="col-lg-6 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li>
                <i class="bi bi-chevron-right"></i> <a href="{% url 'search_area' %}">Search City</a>
              </li>
              <li>
                <i class="bi bi-chevron-right"></i> <a href="{% url 'predict_year' %}">Predict Year</a>
              </li>
              <li>
                <i class="bi bi-chevron-right"></i> <a href="{% url 'chat' %}">Chat</a>
              </li>
              <li>
                <i class="bi bi-chevron-right"></i> <a href="{% url 'area_crime_heatmap' %}">City Crime Heat Map</a>
              </li>
              <li>
                <i class="bi bi-chevron-right"></i> <a href="{% url 'predicted_crime_by_area' %}">Predict City Crime</a>
              </li>
              <li>
                <i class="bi bi-chevron-right"></i> <a href="{% url 'crime_rate_by_area' %}">Crime 19-24</a>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="container copyright text-center mt-4">
        <p>
          © <span>Copyright</span> <strong class="px-1 sitename">CrimeLens</strong> <span>All Rights Reserved</span>
        </p>
        <div class="credits">
          <!-- All the links in the footer should remain intact. -->
          <!-- You can delete the links only if you've purchased the pro version. -->
          <!-- Licensing information: https://bootstrapmade.com/license/ -->
          <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        </div>
      </div>
    </footer>

    <!-- Scroll Top -->
    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    

    <!-- Vendor JS Files -->
    <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'vendor/php-email-form/validate.js' %}"></script>
    <script src="{% static 'vendor/aos/aos.js' %}"></script>
    <script src="{% static 'vendor/glightbox/js/glightbox.min.js' %}"></script>
    <script src="{% static 'vendor/waypoints/noframework.waypoints.js' %}"></script>
    <script src="{% static 'vendor/purecounter/purecounter_vanilla.js' %}"></script>
    <script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
    <script src="{% static 'vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>

    <!-- Main JS File -->
    <script src="{% static 'js/main.js' %}"></script>
    <script>
    const coordinates = {
      "Rahim Yar Khan": [28.4194, 70.2989],
      "Sadiqabad": [28.3062, 70.1302],
      "Bahawalpur": [29.3956, 71.6836]
    };

    const crimeColors = {
      "bike theft": "red",
      "theft": "orange",
      "girl kidnaping": "pink",
      "electricity theft": "yellow",
      "dacoty": "brown",
      "us": "blue",
      "murder": "black",
      "check bounce": "purple",
      "narcotics": "green",
      "fight": "darkred",
      "fight with women": "deeppink",
      "sata bazi": "gray"
    };

    const allCategories = Object.keys(crimeColors);

    const areaCrimeData = {
  "Rahim Yar Khan": {
    "2019": {
      "bike theft": 121, "theft": 80, "girl kidnaping": 30, "electricity theft": 23,
      "dacoty": 12, "us": 18, "murder": 7, "check bounce": 15,
      "narcotics": 22, "fight": 78, "fight with women": 11, "sata bazi": 9
    },
    "2020": {
      "bike theft": 117, "theft": 75, "girl kidnaping": 31, "electricity theft": 25,
      "dacoty": 10, "us": 14, "murder": 6, "check bounce": 12,
      "narcotics": 20, "fight": 87, "fight with women": 13, "sata bazi": 8
    },
    "2021": {
      "bike theft": 135, "theft": 90, "girl kidnaping": 38, "electricity theft": 38,
      "dacoty": 14, "us": 10, "murder": 8, "check bounce": 14,
      "narcotics": 19, "fight": 77, "fight with women": 10, "sata bazi": 12
    },
    "2022": {
      "bike theft": 90, "theft": 82, "girl kidnaping": 32, "electricity theft": 40,
      "dacoty": 11, "us": 15, "murder": 5, "check bounce": 11,
      "narcotics": 25, "fight": 56, "fight with women": 14, "sata bazi": 11
    },
    "2023": {
      "bike theft": 135, "theft": 95, "girl kidnaping": 40, "electricity theft": 33,
      "dacoty": 16, "us": 19, "murder": 9, "check bounce": 16,
      "narcotics": 23, "fight": 70, "fight with women": 17, "sata bazi": 14
    },
    "2024": {
      "bike theft": 156, "theft": 100, "girl kidnaping": 46, "electricity theft": 52,
      "dacoty": 18, "us": 24, "murder": 10, "check bounce": 20,
      "narcotics": 27, "fight": 93, "fight with women": 19, "sata bazi": 15
    }
  },

  "Sadiqabad": {
    "2019": {
      "bike theft": 58, "theft": 101, "girl kidnaping": 15, "electricity theft": 12,
      "dacoty": 9, "us": 6, "murder": 2, "check bounce": 25,
      "narcotics": 29, "fight": 34, "fight with women": 5, "sata bazi": 7
    },
    "2020": {
      "bike theft": 60, "theft": 98, "girl kidnaping": 17, "electricity theft": 14,
      "dacoty": 8, "us": 5, "murder": 5, "check bounce": 32,
      "narcotics": 31, "fight": 30, "fight with women": 6, "sata bazi": 6
    },
    "2021": {
      "bike theft": 64, "theft": 104, "girl kidnaping": 16, "electricity theft": 15,
      "dacoty": 10, "us": 4, "murder": 7, "check bounce": 23,
      "narcotics": 26, "fight": 35, "fight with women": 7, "sata bazi": 8
    },
    "2022": {
      "bike theft": 62, "theft": 102, "girl kidnaping": 18, "electricity theft": 17,
      "dacoty": 12, "us": 5, "murder": 6, "check bounce": 26,
      "narcotics": 27, "fight": 31, "fight with women": 6, "sata bazi": 9
    },
    "2023": {
      "bike theft": 66, "theft": 118, "girl kidnaping": 20, "electricity theft": 18,
      "dacoty": 14, "us": 7, "murder": 5, "check bounce": 18,
      "narcotics": 23, "fight": 38, "fight with women": 9, "sata bazi": 10
    },
    "2024": {
      "bike theft": 70, "theft": 128, "girl kidnaping": 22, "electricity theft": 20,
      "dacoty": 15, "us": 6, "murder": 6, "check bounce": 38,
      "narcotics": 37, "fight": 40, "fight with women": 10, "sata bazi": 12
    }
  },

  "Bahawalpur": {
    "2019": {
      "bike theft": 50, "theft": 76, "girl kidnaping": 28, "electricity theft": 22,
      "dacoty": 65, "us": 8, "murder": 4, "check bounce": 20,
      "narcotics": 15, "fight": 40, "fight with women": 32, "sata bazi": 10
    },
    "2020": {
      "bike theft": 48, "theft": 70, "girl kidnaping": 24, "electricity theft": 20,
      "dacoty": 55, "us": 6, "murder": 5, "check bounce": 18,
      "narcotics": 17, "fight": 38, "fight with women": 23, "sata bazi": 16
    },
    "2021": {
      "bike theft": 52, "theft": 74, "girl kidnaping": 26, "electricity theft": 25,
      "dacoty": 56, "us": 9, "murder": 3, "check bounce": 22,
      "narcotics": 20, "fight": 36, "fight with women": 42, "sata bazi": 14
    },
    "2022": {
      "bike theft": 58, "theft": 78, "girl kidnaping": 30, "electricity theft": 28,
      "dacoty": 70, "us": 7, "murder": 6, "check bounce": 24,
      "narcotics": 22, "fight": 41, "fight with women": 38, "sata bazi": 18
    },
    "2023": {
      "bike theft": 60, "theft": 82, "girl kidnaping": 33, "electricity theft": 30,
      "dacoty": 68, "us": 10, "murder": 5, "check bounce": 26,
      "narcotics": 25, "fight": 43, "fight with women": 33, "sata bazi": 10
    },
    "2024": {
      "bike theft": 66, "theft": 85, "girl kidnaping": 36, "electricity theft": 35,
      "dacoty": 88, "us": 12, "murder": 7, "check bounce": 30,
      "narcotics": 28, "fight": 46, "fight with women": 45, "sata bazi": 13
    }
  }
};



    const maps = {
      "Rahim Yar Khan": L.map('map-ryk').setView(coordinates["Rahim Yar Khan"], 12),
      "Sadiqabad": L.map('map-sdk').setView(coordinates["Sadiqabad"], 12),
      "Bahawalpur": L.map('map-bwp').setView(coordinates["Bahawalpur"], 12)
    };

    for (let city in maps) {
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
      }).addTo(maps[city]);
    }

    const layerGroups = {
      "Rahim Yar Khan": L.layerGroup().addTo(maps["Rahim Yar Khan"]),
      "Sadiqabad": L.layerGroup().addTo(maps["Sadiqabad"]),
      "Bahawalpur": L.layerGroup().addTo(maps["Bahawalpur"])
    };

    function getRandomNearbyPoint([lat, lng], radius = 5000) {
      const r = radius / 111300;
      const u = Math.random();
      const v = Math.random();
      const w = r * Math.sqrt(u);
      const t = 2 * Math.PI * v;
      const dx = w * Math.cos(t);
      const dy = w * Math.sin(t);
      return [lat + dy, lng + dx];
    }

    function updateMap(city) {
    const yearVal = document.getElementById(`year-${cityToKey(city)}`).value;
    const crimeVal = document.getElementById(`crime-${cityToKey(city)}`).value;
    const map = maps[city];
    const layer = layerGroups[city];
    layer.clearLayers();

    const cityData = areaCrimeData[city];
    for (const year in cityData) {
      if (yearVal !== "all" && year !== yearVal) continue;
      for (const crime in cityData[year]) {
        if (crimeVal !== "all" && crime !== crimeVal) continue;

        const color = crimeColors[crime] || "red";
        const count = cityData[year][crime];

        for (let i = 0; i < count; i++) {
          const point = getRandomNearbyPoint(coordinates[city]);
          L.circleMarker(point, {
            radius: 4,
            fillColor: color,
            color: color,
            fillOpacity: 0.7,
            weight: 0
          }).bindTooltip(`${crime} (${year})`).addTo(layer);
        }
      }
    }
  }

    
function cityToKey(city) {
  const map = {
    "Rahim Yar Khan": "ryk",
    "Sadiqabad": "sdk",
    "Bahawalpur": "bwp"
  };
  return map[city];
}

    function populateCrimeSelects() {
    ["ryk", "sdk", "bwp"].forEach(id => {
      const select = document.getElementById(`crime-${id}`);
      // Empty the dropdown first
      select.innerHTML = "<option value='all'>All Crimes</option>";
      allCategories.forEach(cat => {
        const option = document.createElement("option");
        option.value = cat;
        option.innerText = cat;
        select.appendChild(option);
      });
    });
  }
   // Initialize the crime select dropdowns
   populateCrimeSelects();
  // Call updateMap for the initial loading
  updateMap("Rahim Yar Khan");
  updateMap("Sadiqabad");
  updateMap("Bahawalpur");
  </script>
    
    
    
    
  </body>
</html>
